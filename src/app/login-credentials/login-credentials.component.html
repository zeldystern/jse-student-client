<main role="main">
  <div layout="column" layout-align="center center" style="text-align: center">
    <h3>Login Credentials</h3>
    <form [formGroup]="loginCredentialsForm" (ngSubmit)="onSubmit()" >
      <div class="form-group">
        <label class="sr-only" for="userName">User Name</label>
        <div>
          <mat-form-field>
            <input type="text" matInput class="form-control" id="userName"
                   formControlName="userName" placeholder="User Name">
          </mat-form-field>
        </div>
        <div *ngIf="userName.pending">Validating...</div>
        <mat-error *ngIf="userName.invalid && (userName.dirty || userName.touched)" class="alert alert-danger">

          <div *ngIf="userName.errors.required">
            User Name is required.
          </div>

          <div *ngIf="userName.errors.minlength">
            User Name must be at least 6 characters.
          </div>

          <div *ngIf="userName.errors?.userNameIsNotUnique">
            User Name is already taken.
          </div>
        </mat-error>
      </div>
      <div formGroupName="passwordGroup">
        <div class="form-group">
          <label class="sr-only" for="password">Password</label>
          <div>
            <mat-form-field>
              <input matInput type="password" class="form-control" id="password" formControlName="password" placeholder="Password">
            </mat-form-field>
          </div>
          <mat-error *ngIf="password.invalid && (password.dirty || password.touched)"
            class="alert alert-danger">

            <div *ngIf="password.errors.required">
              Password is required.
            </div>

            <div *ngIf="password.errors.minlength">
              Password must be at least 8 characters.
            </div>
          </mat-error>
        </div>
        <div class="form-group">
          <label class="sr-only" for="confirmPassword">Confirm Password</label>
          <div>
            <mat-form-field>
              <input matInput type="password" class="form-control" id="confirmPassword" formControlName="confirmPassword" placeholder="Confirm Password">
            </mat-form-field>
          </div>
          <mat-error *ngIf="confirmPassword.invalid && (confirmPassword.dirty || confirmPassword.touched)"
            class="alert alert-danger">

            <div *ngIf="confirmPassword.errors.required">
              Confirm Password is required.
            </div>

            <div *ngIf="confirmPassword.errors?.MatchPassword">
              Passwords do not match.
            </div>
          </mat-error>
        </div>
      </div>
      <mat-progress-spinner *ngIf="loading" style="margin:0 auto;" mode="indeterminate" diameter="20">
      </mat-progress-spinner>
      <mat-error *ngIf="loginCredentialsError">
        {{ loginCredentialsError }}
      </mat-error>
      <div style="color:blue" *ngIf="loginCredentialsSuccess"> 
        {{ loginCredentialsSuccess }}
      </div>
      <div style="padding-top:20px"> 
        <button style="margin-right: 2px" [disabled]="!loginCredentialsForm.valid" type="submit" color="primary" mat-raised-button mat-button>Save</button>
      </div>
    </form>
  </div>
</main>
